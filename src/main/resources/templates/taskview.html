<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Task view</title>
  <link rel="stylesheet" th:href="@{../css/grid.css}" href="../static/css/grid.css">
  <link rel="stylesheet" th:href="@{../css/view.css}" href="../static/css/view.css">
  <link rel="stylesheet" th:href="@{../css/modal.css}" href="../static/css/modal.css">
</head>
<body >


<div class="grid-container">
  <div class="item1">
    <h1>Project Tasks</h1>
    <button onclick="history.back()">Go Back</button>
  </div>

  <div class="item2">
    <div class="navside">
      <div class="navside-header">
        <a th:href="@{'/project_manager/'+ ${session.PmID}}"><h3 class="headline">Projects</h3></a>
      </div>
      <ul class="list-group" >
        <li th:each="project : ${projectsByPmId}">
          <a th:href="@{'/processes/'+${project.getProjectId()}}" href="processes.html">
            <span th:text="${project.getProjectName()}"></span>
          </a>
        </li>
      </ul>
    </div>
  </div>


  <div class="item3">
    <div>
      <h3>Current Project: <span th:text="${showProjectName}"></span></h3>
      <h3>Project Manager: <span th:text="${showProjectManager}"></span></h3>

    </div>
    <div  class="view" th:each="task : ${taskView}">
      <div>
        <h4>Task info</h4>
        <span class="text1">Task id:&ensp;</span><span th:text="${task.taskId}"></span><br>
        <span class="text1">Process id:&ensp;</span><span th:text="${task.processId}"></span><br>
        <span class="text1">Task name:&ensp;</span><span th:text="${task.taskName}"></span><br>
        <span class="text1">Effort:&ensp;</span><span th:text="${task.effort}"></span><br>
        <span class="text1">Exp start date:&ensp;</span><span th:text="${task.expectedStartDate}"></span><br>
        <span class="text1">Allocation:&ensp;</span><span th:text="${task.minAllocation}"></span><br>
        <span class="text1">Workdays needed:&ensp;</span><span th:text="${task.taskDaysNeeded()}"></span><br>
        <span class="text1">Status:&ensp;</span><span th:text="${task.taskStatus}"></span><br>
        <span class="text1">Assigned to:&ensp;</span><span th:text="${task.assignedname}"></span><br>
        <span class="text1">Task no.:&ensp;</span><span th:text="${task.taskDependencyNumber}"></span><br><br>

        <a th:href="@{'/updatetask/' + ${task.taskId}}" href="/updatetask.html"><h4>Update Task</h4></a>
        <a th:href="@{'/deletetask/' + ${task.taskId}}" href="/deletetask.html"><h4>Delete Task</h4></a>

      </div>
    </div>
  </div>
</div>

<!-- A button to open the popup form -->
<button class="open-button" onclick="openForm()">Create New Task</button>

<!-- The  Create form -->
<div class="form-popup" id="myFormCreate">
  <form action="/createTasks" class="form-container" method="post">

    <label for="taskName-create"><b>Task Name</b></label>
    <input id="taskName-create" type="text" placeholder="Enter Task Name" name="TaskName" required>

    <label for="effort-create"><b>Effort</b></label>
    <input id="effort-create" type="text" placeholder="Enter effort" name="Effort" required>

    <label for="expectedStartDate-create"><b>Expected Start Date</b></label>
    <input id="expectedStartDate-create" type="date" placeholder="Enter Expected Start Date" name="ExpectedStartDate" required>

    <label for="minAllocation-create"><b>Minimum Allocation</b></label>
    <input id="minAllocation-create" type="text" placeholder="Enter Minimum Allocation" name="MinAllocation" required>

    <label for="taskStatus-create"><b>Task status</b></label>
    <input id="taskStatus-create" type="text" placeholder="Enter Task Status" name="TaskStatus" required>

    <label for="assignedId-create"><b>Assigned ID</b></label>
    <input id="assignedId-create" type="text" placeholder="Enter Assignment ID" name="AssignedId" required>

    <label for="taskDependencyNumber-create"><b>Task Sequence Number</b></label>
    <input id="taskDependencyNumber-create" type="text" placeholder="Enter Task Sequence Number" name="TaskSequenceNumber" required>

    <button type="submit" class="btn">Create Task</button>
    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
  </form>
</div>

<script>
  function openForm() {
    document.getElementById("myFormCreate").style.display = "block";
  }

  function closeForm() {
    document.getElementById("myFormCreate").style.display = "none";
  }
</script>
</body>
</html>






